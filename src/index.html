<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Database Retrieval</title>
    </head>
        
    <body>
        <label> Restaurant Name </label>
        <input type="text" id="name">
        <br><br> 

        <label> Find </label>
        <input type="text" id="find">
        <br><br> 

        <button id="GetBtn">Retrieve</button>

        <script type="module">
            // Import the functions you need from the SDKs you need
            import {initializeApp} from "https://www.gstatic.com/firebasejs/10.8.1/firebase-app.js";
            import {getAnalytics} from "https://www.gstatic.com/firebasejs/10.8.1/firebase-analytics.js";
            // TODO: Add SDKs for Firebase products that you want to use
            // https://firebase.google.com/docs/web/setup#available-libraries

            // Your web app's Firebase configuration
            // For Firebase JS SDK v7.20.0 and later, measurementId is optional
            const firebaseConfig = {
            apiKey: "AIzaSyDY7XjksxyklzjofNZ-J3CBYj_ovmA0Oho",
            authDomain: "bitequest-68fcf.firebaseapp.com",
            databaseURL: "https://bitequest-68fcf-default-rtdb.firebaseio.com",
            projectId: "bitequest-68fcf",
            storageBucket: "bitequest-68fcf.appspot.com",
            messagingSenderId: "198288473851",
            appId: "1:198288473851:web:ca305f85aa1e475d5afa5e",
            measurementId: "G-NGK8MVZX91"
            };

            // Initialize Firebase
            const app = initializeApp(firebaseConfig);
            const analytics = getAnalytics(app); 
            import {getDatabase, onValue, ref, child, get, set, update, remove} from "https://www.gstatic.com/firebasejs/10.8.1/firebase-database.js";
            const db = getDatabase();
            let name = document.getElementById("name");
            let find = document.getElementById("find");
            let GetBtn = document.getElementById("GetBtn");

            function GetData() {
                const dbRef = ref(db);
                get(child(dbRef, `Rest/${find.value}`)).then((snapshot)=>{
                    if (snapshot.exists())  {   
                        name.value = snapshot.val().name;
                        console.log(snapshot.val().address);
                        alert("Exists in database");
                    }
                    else {
                        alert("Does not exists");
                    }
                }).catch((error)=>{
                    alert("Unsuccessful");
                    console.error(error);
                });
            }
            GetBtn.addEventListener("click", GetData);
        </script>
    </body>
</html>